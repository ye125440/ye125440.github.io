<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Webpack 4 和模块打包的初学者指南 | 桂伦铝&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="我的个人博客">
    
    <link rel="preload" href="/assets/css/0.styles.495d9abf.css" as="style"><link rel="preload" href="/assets/js/app.e1fa9833.js" as="script"><link rel="preload" href="/assets/js/2.368db4b0.js" as="script"><link rel="preload" href="/assets/js/26.e2e11f12.js" as="script"><link rel="prefetch" href="/assets/js/10.115e08ae.js"><link rel="prefetch" href="/assets/js/11.80383d12.js"><link rel="prefetch" href="/assets/js/12.10d82eef.js"><link rel="prefetch" href="/assets/js/13.b402f7b8.js"><link rel="prefetch" href="/assets/js/14.cfdaf901.js"><link rel="prefetch" href="/assets/js/15.8080a36b.js"><link rel="prefetch" href="/assets/js/16.bd1099e6.js"><link rel="prefetch" href="/assets/js/17.972cd4bb.js"><link rel="prefetch" href="/assets/js/18.552c93b4.js"><link rel="prefetch" href="/assets/js/19.4967b00e.js"><link rel="prefetch" href="/assets/js/20.bdb245c2.js"><link rel="prefetch" href="/assets/js/21.25d975ec.js"><link rel="prefetch" href="/assets/js/22.5d97c0a2.js"><link rel="prefetch" href="/assets/js/23.668a7309.js"><link rel="prefetch" href="/assets/js/24.c87d91af.js"><link rel="prefetch" href="/assets/js/25.be0ada5c.js"><link rel="prefetch" href="/assets/js/27.f5760616.js"><link rel="prefetch" href="/assets/js/28.191b1ec5.js"><link rel="prefetch" href="/assets/js/29.fce60451.js"><link rel="prefetch" href="/assets/js/3.5508598a.js"><link rel="prefetch" href="/assets/js/30.288b3055.js"><link rel="prefetch" href="/assets/js/31.4e0f19c3.js"><link rel="prefetch" href="/assets/js/4.7e734d74.js"><link rel="prefetch" href="/assets/js/5.5d87f27c.js"><link rel="prefetch" href="/assets/js/6.6abfaa77.js"><link rel="prefetch" href="/assets/js/7.a46e560d.js"><link rel="prefetch" href="/assets/js/8.7efb8f8d.js"><link rel="prefetch" href="/assets/js/9.8c180547.js">
    <link rel="stylesheet" href="/assets/css/0.styles.495d9abf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">桂伦铝's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/javascript/" class="nav-link">
  Javascript
</a></div><div class="nav-item"><a href="/nodejs/" class="nav-link">
  NodeJs
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="投资" class="dropdown-title"><span class="title">投资</span> <span class="arrow down"></span></button> <button type="button" aria-label="投资" class="mobile-dropdown-title"><span class="title">投资</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/convertible-bond/" class="nav-link">
  可转债
</a></li><li class="dropdown-item"><!----> <a href="/hk-ipo/" class="nav-link">
  港股打新
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/ye125440" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/javascript/" class="nav-link">
  Javascript
</a></div><div class="nav-item"><a href="/nodejs/" class="nav-link">
  NodeJs
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="投资" class="dropdown-title"><span class="title">投资</span> <span class="arrow down"></span></button> <button type="button" aria-label="投资" class="mobile-dropdown-title"><span class="title">投资</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/convertible-bond/" class="nav-link">
  可转债
</a></li><li class="dropdown-item"><!----> <a href="/hk-ipo/" class="nav-link">
  港股打新
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/ye125440" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack-4-和模块打包的初学者指南"><a href="#webpack-4-和模块打包的初学者指南" class="header-anchor">#</a> Webpack 4 和模块打包的初学者指南</h1> <p>原文地址：<a href="https://www.sitepoint.com/beginners-guide-webpack-module-bundling/" target="_blank" rel="noopener noreferrer">https://www.sitepoint.com/beginners-guide-webpack-module-bundling/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong><a href="https://github.com/webpack/webpack" target="_blank" rel="noopener noreferrer">Webpack 4<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的官方文档自述称：</strong></p> <blockquote><p>Webpack 是一个模块管理器。它的主要目的是聚合在浏览器中使用的 JavaScript 文件，而且它也能够转换、聚合或打包几乎任何资源或资产。</p></blockquote> <p><a href="https://webpack.js.org/" target="_blank" rel="noopener noreferrer">Webpack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 已经成为现代 web 开发最重要的工具之一。它主要是一个针对你的 JavaScript 的模块聚合器，但是它可以学会转换你所有的前端资源，比如 HTML，CSS，甚至图像。它可以让你更好地控制你的应用程序发出的 HTTP 请求数量，并允许你使用其他类型的资源(例如 Pug、Sass 和 ES8 )。Webpack 还允许您轻松使用 npm 中的包。</p> <p>本文面向那些对 Webpack 不熟悉的人，将涵盖初始设置和配置、modules、loaders、plugins、代码分割和模块热替换。如果你觉得视频教程很有帮助，我可以强烈推荐 Glen Maddern 的 <a href="https://www.youtube.com/watch?v=WQue1AN93YU" target="_blank" rel="noopener noreferrer">Webpack from First Principles<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，作为理解 Webpack 特殊之处的起点。它现在有点旧了，但是原理仍然是一样的，这是一个很好的介绍。</p> <p>继续跟进，您需要<a href="https://www.sitepoint.com/quick-tip-multiple-versions-node-nvm/" target="_blank" rel="noopener noreferrer">安装 Node.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。您也可以<a href="https://github.com/markbrown4/webpack-demo" target="_blank" rel="noopener noreferrer">从我们的 GitHub 仓库下载演示应用程序<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="设置"><a href="#设置" class="header-anchor">#</a> 设置</h2> <p>让我们用 npm 初始化一个新项目，并安装 webpack 和 webpack-cli(*1) :</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">mkdir</span> webpack-demo <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> webpack-demo
<span class="token function">npm</span> init -y
<span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack webpack-cli
</code></pre></div><p>接下来，我们将创建以下目录结构和内容：</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> webpack-demo
</span><span class="token prefix unchanged"> </span><span class="token line"> |- package.json
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> |- webpack.config.js
</span><span class="token prefix inserted">+</span><span class="token line"> |- /src
</span><span class="token prefix inserted">+</span><span class="token line">   |- index.js
</span><span class="token prefix inserted">+</span><span class="token line"> |- /dist
</span><span class="token prefix inserted">+</span><span class="token line">   |- index.html
</span></span></code></pre></div><p><strong>dist/index.html</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token name">doctype</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Hello Webpack<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>src/index.js</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span>
root<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;p&gt;Hello Webpack.&lt;/p&gt;</span><span class="token template-punctuation string">`</span></span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
</code></pre></div><p><strong>webpack.config.js</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这告诉 Webpack 编译我们的入口路径 <code>src/index.js</code> 中的代码，并在 <code>/dist/bundle.js</code> 中输出一个包。让我们添加一个运行 Webpack 的 <a href="https://docs.npmjs.com/misc/scripts" target="_blank" rel="noopener noreferrer">npm 脚本<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p><strong>package.json</strong></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> {
</span><span class="token prefix unchanged"> </span><span class="token line">   ...
</span><span class="token prefix unchanged"> </span><span class="token line">   &quot;scripts&quot;: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     &quot;develop&quot;: &quot;webpack --mode development --watch&quot;,
</span><span class="token prefix inserted">+</span><span class="token line">     &quot;build&quot;: &quot;webpack --mode production&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line">   ...
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span></code></pre></div><p>使用 <code>npm run develop</code> 命令，我们可以创建第一个包！</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Asset      Size      Chunks           Chunk Names
bundle.js  <span class="token number">2.92</span> KiB  main  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
</code></pre></div><p>现在，你应该可以在浏览器中加载 <code>dist/index.html</code>，并得到“Hello Webpack”的问候。</p> <p>打开 <code>dist/bundle.js</code> 看看 Webpack 做了什么。顶部是 Webpack 的模块引导代码，底部是我们的模块。你可能目前还没有感受到惊喜，但是如果你已经走了这么远，你现在可以开始使用ES模块，并且 Webpack 将能够产生一个可以在所有浏览器中工作的生产包。</p> <p>用 <code>Ctrl + C</code> 重新启动构建，并运行 <code>npm run build</code> 以在生产模式下编译我们的包。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Asset      Size       Chunks           Chunk Names
bundle.js  <span class="token number">647</span> bytes  main  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
</code></pre></div><p>请注意，包大小已经从 <strong>2.92 KiB</strong> 下降到 <strong>647 bytes</strong>(*2)。</p> <p>再看看 <code>dist/bundle.js</code>，你会看到一堆丑陋杂乱的代码。我们的包已经用UglifyJS缩小了：代码将运行完全相同，但是它以尽可能小的文件大小完成。</p> <ul><li><code>--mode development</code> 优化构建速度和调试。</li> <li><code>--mode production</code> 优化运行时的执行速度和输出文件大小。</li></ul> <h2 id="模块"><a href="#模块" class="header-anchor">#</a> 模块</h2> <p>使用 ES 模块，你可以把你的大程序分成许多小的、独立的程序。</p> <p>开箱即用，Webpack 知道如何使用 <code>import</code> 和 <code>export</code> 语句使用 ES 模块。例如，现在让我们通过安装 <a href="https://lodash.com/" target="_blank" rel="noopener noreferrer">lodash-es<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和添加第二个模块来尝试一下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev lodash-es
</code></pre></div><p><strong>src/index.js</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> groupBy <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;lodash-es&quot;</span>
<span class="token keyword">import</span> people <span class="token keyword">from</span> <span class="token string">&quot;./people&quot;</span>

<span class="token keyword">const</span> managerGroups <span class="token operator">=</span> <span class="token function">groupBy</span><span class="token punctuation">(</span>people<span class="token punctuation">,</span> <span class="token string">&quot;manager&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span>
root<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;pre&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>managerGroups<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/pre&gt;</span><span class="token template-punctuation string">`</span></span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
</code></pre></div><p><strong>src/people.js</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    manager<span class="token operator">:</span> <span class="token string">&quot;Jen&quot;</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Bob&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    manager<span class="token operator">:</span> <span class="token string">&quot;Jen&quot;</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Sue&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    manager<span class="token operator">:</span> <span class="token string">&quot;Bob&quot;</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Shirley&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> people
</code></pre></div><p>运行 <code>npm run develop</code> 来启动 Webpack 并刷新 <code>index.html</code>。屏幕上应该会显示按 manager 属性分组的一系列人员。</p> <p>*注意：*没有像<code>'es-lodash'</code>这样的相对路径的导入是从 npm 安装到 <code>/node_modules</code> 的模块。您自己的模块将总是需要一个相对路径，如<code>'./people'</code>，因为这是你区分他们的方法。</p> <p>请注意，在控制台中，我们的包大小已经增加到 <strong>1.41 MiB</strong>！这值得关注，尽管在这种情况下没有理由担心。使用 <code>npm run build</code> 在生产模式下进行编译，将从包中移除 lodash-es 中所有未使用的 lodash 模块。这种删除未使用的导入的过程被称为 <strong>tree-shaking</strong>，这是您从 Webpack 中免费获得的。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">npm</span> run develop

Asset      Size      Chunks                  Chunk Names
bundle.js  <span class="token number">1.41</span> MiB  main  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  main
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">npm</span> run build

Asset      Size      Chunks        Chunk Names
bundle.js  <span class="token number">16.7</span> KiB  <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
</code></pre></div><h2 id="加载器"><a href="#加载器" class="header-anchor">#</a> 加载器</h2> <p>加载器允许您在文件导入时对其运行预处理程序。这允许您聚合 JavaScript 之外的静态资源，但是让我们先看看加载 <code>.js</code> 模块时可以做些什么。</p> <p>让我们把所有 <code>.js</code> 文件通过下一代 JavaScript 转译器 <a href="http://babeljs.io/" target="_blank" rel="noopener noreferrer">Babel<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 运行来保持所有代码的现代化 ：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev <span class="token string">&quot;babel-loader@^8.0.0-beta&quot;</span> @babel/core @babel/preset-env
</code></pre></div><p><strong>webpack.config.js</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry<span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
      path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">+</span>   module<span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>     rules<span class="token operator">:</span> <span class="token punctuation">[</span>
<span class="token operator">+</span>       <span class="token punctuation">{</span>
<span class="token operator">+</span>         test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
<span class="token operator">+</span>         exclude<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(node_modules|bower_components)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
<span class="token operator">+</span>         use<span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>           loader<span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
<span class="token operator">+</span>         <span class="token punctuation">}</span>
<span class="token operator">+</span>       <span class="token punctuation">}</span>
<span class="token operator">+</span>     <span class="token punctuation">]</span>
<span class="token operator">+</span>   <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p><strong>.babelrc</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&quot;@babel/env&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;modules&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;syntax-dynamic-import&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这份配置(*3)防止了 Babel 将 <code>import</code> 和 <code>export</code> 语句转译到 ES5 中，并启用了动态导入——我们将在后面的代码拆分一节中讨论这一点。</p> <p>我们现在可以自由使用现代语言特性，它们将被编译成在所有浏览器中运行的 ES5。</p> <h3 id="sass"><a href="#sass" class="header-anchor">#</a> Sass</h3> <p>加载器可以链接在一起成为一系列转换。是从我们的 JavaScript 中导入 Sass 是演示这是如何工作的一个好方法：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev style-loader css-loader sass-loader node-sass
</code></pre></div><p><strong>webpack.config.js</strong></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">   ...
</span><span class="token prefix unchanged"> </span><span class="token line">   module: {
</span><span class="token prefix unchanged"> </span><span class="token line">     rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">       ...
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       {
</span><span class="token prefix inserted">+</span><span class="token line">         test: /\.scss$/,
</span><span class="token prefix inserted">+</span><span class="token line">         use: [{
</span><span class="token prefix inserted">+</span><span class="token line">           loader: 'style-loader'
</span><span class="token prefix inserted">+</span><span class="token line">         }, {
</span><span class="token prefix inserted">+</span><span class="token line">           loader: 'css-loader'
</span><span class="token prefix inserted">+</span><span class="token line">         }, {
</span><span class="token prefix inserted">+</span><span class="token line">           loader: 'sass-loader'
</span><span class="token prefix inserted">+</span><span class="token line">         }]
</span><span class="token prefix inserted">+</span><span class="token line">       }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     ]
</span><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span></code></pre></div><p>这些加载器以相反的顺序进行处理：</p> <ul><li><code>sass-loader</code> 将 Sass 转换为 CSS。</li> <li><code>css-loader</code> 将 CSS 解析成 JavaScript 并解析任何依赖关系。</li> <li><code>style-loader</code> 输出我们的 CSS 到 document 的 <code>&lt;style&gt;</code> 标签中。</li></ul> <p>你可以把这些看作函数调用。一个加载器的输出作为输入馈送到下一个:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">styleLoader</span><span class="token punctuation">(</span><span class="token function">cssLoader</span><span class="token punctuation">(</span><span class="token function">sassLoader</span><span class="token punctuation">(</span><span class="token string">&quot;source&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>让我们添加一个 Sass 源文件并导入为一个模块。</p> <p><strong>src/style.scss</strong></p> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token property"><span class="token variable">$bluegrey</span></span><span class="token punctuation">:</span> #2b3a42<span class="token punctuation">;</span>

<span class="token selector">pre </span><span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 8px 16px<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token variable">$bluegrey</span><span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #e1e6e9<span class="token punctuation">;</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> Menlo<span class="token punctuation">,</span> Courier<span class="token punctuation">,</span> monospace<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 13px<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 1.5<span class="token punctuation">;</span>
  <span class="token property">text-shadow</span><span class="token punctuation">:</span> 0 1px 0 <span class="token function">rgba</span><span class="token punctuation">(</span>23<span class="token punctuation">,</span> 31<span class="token punctuation">,</span> 35<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>src/index.js</strong></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> import { groupBy } from 'lodash-es'
</span><span class="token prefix unchanged"> </span><span class="token line"> import people from './people'
</span></span>
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import './style.scss'
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ...
</span></span></code></pre></div><p>用 <code>Ctrl + C</code> 和 <code>npm run develop</code> 重新启动构建。在浏览器中刷新 <code>index.html</code>，你会看到一些样式。</p> <h3 id="js-中的-css"><a href="#js-中的-css" class="header-anchor">#</a> JS 中的 CSS</h3> <p>我们刚刚从 JavaScript 中导入了一个 Sass 文件，作为一个模块。</p> <p>打开 <code>dist/bundle.js</code> 并搜索“pre {”。事实上，我们的 Sass 已经被编译成一串 CSS，并作为一个模块保存在我们的包中。当我们将该模块导入到我们的 JavaScript 中时，<code>style-loader</code> 将该字符串输出到内嵌的<code>&lt;style&gt;</code> 标签中。</p> <p><strong>为什么要做这样的事？</strong></p> <p>我不会在这里深入探讨这个话题，但有几个理由需要考虑：</p> <ul><li>您可能希望包含在项目中的一个 JavaScript 组件可能依赖于其他资产来正常运行(HTML、CSS、图像、SVG )。如果这些都可以捆绑在一起，就更容易导入和使用。</li> <li>死代码消除：当一个 JS 组件不再被您的代码导入时，该 CSS 也将不再被导入。生成的包将只包含做某事的代码。</li> <li>CSS 模块：CSS 的全局命名空间使得很难相信对你的 CSS 的改变不会有任何副作用。CSS 模块在默认情况下通过使 CSS 成为本地的，并暴露您可以在 JavaScript 中引用的唯一类名来改变这一点。</li> <li>通过以巧妙的方式聚合/拆分的代码来减少 HTTP 请求的数量。</li></ul> <h3 id="图像"><a href="#图像" class="header-anchor">#</a> 图像</h3> <p>我们要看的最后一个加载器例子是用 <code>file-loader</code> 处理图像。</p> <p>在标准的 HTML 文档中，当浏览器遇到 <code>img</code> 标签或具有 <code>background-image</code>  属性的元素时，会获取图像。使用Webpack，您可以在小图像的情况下通过将图像源存储为 JavaScript 中的字符串来优化这一点。通过这样做，您可以预加载它们，浏览器以后就不必用单独的请求来获取它们了：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev file-loader
</code></pre></div><p><strong>webpack.config.js</strong></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">   ...
</span><span class="token prefix unchanged"> </span><span class="token line">   module: {
</span><span class="token prefix unchanged"> </span><span class="token line">     rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">       ...
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       {
</span><span class="token prefix inserted">+</span><span class="token line">         test: /\.(png|svg|jpg|gif)$/,
</span><span class="token prefix inserted">+</span><span class="token line">         use: [
</span><span class="token prefix inserted">+</span><span class="token line">           {
</span><span class="token prefix inserted">+</span><span class="token line">             loader: 'file-loader'
</span><span class="token prefix inserted">+</span><span class="token line">           }
</span><span class="token prefix inserted">+</span><span class="token line">         ]
</span><span class="token prefix inserted">+</span><span class="token line">       }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     ]
</span><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span></code></pre></div><p>使用以下命令下载<a href="https://raw.githubusercontent.com/sitepoint-editors/webpack-demo/master/src/code.png" target="_blank" rel="noopener noreferrer">测试图像<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">curl</span> https://raw.githubusercontent.com/sitepoint-editors/webpack-demo/master/src/code.png --output src/code.png
</code></pre></div><p>用 <code>Ctrl + C</code> 和 <code>npm run develop</code> 重新启动构建，您现在可以将图像作为模块导入了！</p> <p><strong>src/index.js</strong></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> import { groupBy } from 'lodash-es'
</span><span class="token prefix unchanged"> </span><span class="token line"> import people from './people'
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> import './style.scss'
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import './image-example'
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ...
</span></span></code></pre></div><p><strong>src/image-example.js</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> codeURL <span class="token keyword">from</span> <span class="token string">&quot;./code.png&quot;</span>

<span class="token keyword">const</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;img&quot;</span><span class="token punctuation">)</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> codeURL
img<span class="token punctuation">.</span>style <span class="token operator">=</span> <span class="token string">&quot;background: #2B3A42; padding: 20px&quot;</span>
img<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">32</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span>
</code></pre></div><p>这将包括一个图像，其中 <code>src</code> 属性包含图像本身的<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs" target="_blank" rel="noopener noreferrer">数据 URI<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>data:image/png;base64,iVBO...<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">background</span><span class="token punctuation">:</span> #2B3A42<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> 20px</span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>32<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>我们 CSS 中的背景图像也由 <code>file-loader</code> 处理。</p> <p><strong>src/style.scss</strong></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> $bluegrey: #2b3a42;
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> pre {
</span><span class="token prefix unchanged"> </span><span class="token line">   padding: 8px 16px;
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   background: $bluegrey;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   background: $bluegrey url(&quot;code.png&quot;) no-repeat center center / 32px 32px;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   color: #e1e6e9;
</span><span class="token prefix unchanged"> </span><span class="token line">   font-family: Menlo, Courier, monospace;
</span><span class="token prefix unchanged"> </span><span class="token line">   font-size: 13px;
</span><span class="token prefix unchanged"> </span><span class="token line">   line-height: 1.5;
</span><span class="token prefix unchanged"> </span><span class="token line">   text-shadow: 0 1px 0 rgba(23, 31, 35, 0.5);
</span><span class="token prefix unchanged"> </span><span class="token line">   border-radius: 3px;
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span></code></pre></div><p>请参见文档中加载器的更多示例：</p> <ul><li><a href="https://webpack.js.org/guides/asset-management/#loading-fonts" target="_blank" rel="noopener noreferrer">Loading Fonts<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://webpack.js.org/guides/asset-management/#loading-data" target="_blank" rel="noopener noreferrer">Loading Data<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="依赖图"><a href="#依赖图" class="header-anchor">#</a> 依赖图</h3> <p>现在，您应该能够看到加载器如何帮助在您的资产之间建立依赖关系树。这就是 Webpack 主页上的图片所展示的。</p> <p><img src="https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2017/01/1484692838webpack-dependency-tree.png" alt="JS requires SCSS requires CSS requires PNG"></p> <p>虽然 JavaScript 是入口点，但是 Webpack 意识到您的其他资产类型——如 HTML、CSS 和 SVG——都有它们自己的依赖关系，这应该被视为构建过程的一部分。</p> <h2 id="代码分割"><a href="#代码分割" class="header-anchor">#</a> 代码分割</h2> <p>来自 <a href="https://webpack.js.org/guides/code-splitting/" target="_blank" rel="noopener noreferrer">Webpack 文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：</p> <blockquote><p>代码分割是 Webpack 最引人注目的特性之一。这个特性允许您将代码分成不同的包，然后可以按需或并行加载。它可用于实现更小的包和控制资源负载优先级，如果使用正确，这将对负载时间产生重大影响（好的方面）。</p></blockquote> <p>到目前为止，我们只看到了一个入口点——<code>src/index.js</code>——和一个输出包——<code>dist/bundle.js</code>。当你的应用程序增长时，你需要把它分开，这样整个代码库就不会在开始时被下载。一个好的方法是使用<a href="https://webpack.js.org/guides/code-splitting/" target="_blank" rel="noopener noreferrer">代码拆分<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和<a href="https://webpack.js.org/guides/lazy-loading/" target="_blank" rel="noopener noreferrer">惰性加载<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>来按需获取代码路径需要的东西。</p> <p>让我们通过添加一个“chat”模块来演示这一点，当有人与它交互时，这个模块被获取并初始化。我们将创建一个新的入口点并给它一个名称，我们还将使输出的文件名动态化，因此每个块的文件名都不同。</p> <p><strong>webpack.config.js</strong></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  const path = require('path')
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   entry: './src/index.js',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   entry: {
</span><span class="token prefix inserted">+</span><span class="token line">     app: './src/app.js'
</span><span class="token prefix inserted">+</span><span class="token line">   },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   output: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     filename: 'bundle.js',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     filename: '[name].bundle.js',
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     path: path.resolve(__dirname, 'dist')
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line">   ...
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span></code></pre></div><p><strong>src/app.js</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">'./app.scss'</span>

<span class="token keyword">const</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">)</span>
button<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Open chat'</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span>

button<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;chat&quot; */</span> <span class="token string">&quot;./chat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">chat</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    chat<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>src/chat.js</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> people <span class="token keyword">from</span> <span class="token string">&quot;./people&quot;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span>
  root<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;p&gt;There are </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>people<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> people in the room.&lt;/p&gt;</span><span class="token template-punctuation string">`</span></span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>src/app.scss</strong></p> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token selector">button </span><span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #24b47e<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid <span class="token function">rgba</span><span class="token punctuation">(</span>#000<span class="token punctuation">,</span> .1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">border-width</span><span class="token punctuation">:</span> 1px 1px 3px<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>
  <span class="token property">font</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
  <span class="token property">text-shadow</span><span class="token punctuation">:</span> 0 1px 0 <span class="token function">rgba</span><span class="token punctuation">(</span>#000<span class="token punctuation">,</span> .3<span class="token punctuation">)</span><span class="token punctuation">,</span> 0 1px 1px <span class="token function">rgba</span><span class="token punctuation">(</span>#000<span class="token punctuation">,</span> .2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>*注意：*尽管<code>/ * webpackChunkName * /</code>注释为包命名，但该语法不是特定于 Webpack 的。这是<a href="https://github.com/tc39/proposal-dynamic-import" target="_blank" rel="noopener noreferrer">动态导入的建议语法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，预期在浏览器中直接支持。</p> <p>让我们运行 <code>npm run build</code>，看看这会产生什么结果：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Asset           Size       Chunks        Chunk Names
chat.bundle.js  <span class="token number">377</span> bytes  <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  chat
app.bundle.js   <span class="token number">7.65</span> KiB   <span class="token number">1</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  app
</code></pre></div><p>随着我们的入口包发生了变化，我们也需要更新我们的路径。</p> <p><strong>dist/index.html</strong></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;!doctype html&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;html&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;head&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;title&gt;Hello Webpack&lt;/title&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/head&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;body&gt;
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     &lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     &lt;script src=&quot;app.bundle.js&quot;&gt;&lt;/script&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;/body&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;/html&gt;
</span></span></code></pre></div><p>让我们从 dist 目录启动一个服务，以查看它的运行情况：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> dist
npx serve
</code></pre></div><p>在浏览器中打开 http://localhost:5000，看看会发生什么。最初只获取 <code>bundle.js</code>。当点击按钮时，chat 模块被导入并初始化。</p> <p><img src="https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/03/1521906882lazy-loading.png" alt="Network requests showing lazy loading of chunks"></p> <p>只需很少的努力，我们已经在应用程序中添加了动态代码分割和模块的惰性加载。这是构建高性能网络应用的一个很好的起点。</p> <h2 id="插件"><a href="#插件" class="header-anchor">#</a> 插件</h2> <p>当加载器在单个文件上操作转换时，插件在更大的代码块上操作。</p> <p>现在我们正在聚合我们的代码、外部模块和静态资产，我们的包将会快速增长。插件在这里帮助我们以巧妙的方式分割代码，并优化产品。</p> <p>不知不觉中，我们实际上已经使用了许多<a href="https://webpack.js.org/concepts/mode/#usage" target="_blank" rel="noopener noreferrer">默认的“mode”附带的 Webpack 插件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p><strong>development</strong></p> <ul><li>为 <code>process.env.NODE_ENV</code> 提供值 “development”</li> <li>NamedModulesPlugin</li></ul> <p><strong>production</strong></p> <ul><li>为 <code>process.env.NODE_ENV</code> 提供值 “production”</li> <li>UglifyJsPlugin</li> <li>ModuleConcatenationPlugin</li> <li>NoEmitOnErrorsPlugin</li></ul> <h3 id="production"><a href="#production" class="header-anchor">#</a> Production</h3> <p>在添加额外的插件之前，我们首先将我们的配置分开，以便我们可以应用特定于每个环境的插件。</p> <p>将 <code>webpack.config.js</code> 重命名为 <code>webpack.common.js</code>，并为 development 和 production 模式各添加一个配置文件。</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> |- webpack.config.js
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> |- webpack.common.js
</span><span class="token prefix inserted">+</span><span class="token line"> |- webpack.dev.js
</span><span class="token prefix inserted">+</span><span class="token line"> |- webpack.prod.js
</span></span></code></pre></div><p>我们将使用 <code>webpack-merge</code> 把我们的公共配置与特定环境的配置相结合：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack-merge
</code></pre></div><p><strong>webpack.dev.js</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> common <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common.js'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>common<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>webpack.prod.js</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> common <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.common.js'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>common<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'production'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>package.json</strong></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  &quot;scripts&quot;: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    &quot;develop&quot;: &quot;webpack --watch --mode development&quot;,
</span><span class="token prefix deleted">-</span><span class="token line">    &quot;build&quot;: &quot;webpack --mode production&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &quot;develop&quot;: &quot;webpack --watch --config webpack.dev.js&quot;,
</span><span class="token prefix inserted">+</span><span class="token line">    &quot;build&quot;: &quot;webpack --config webpack.prod.js&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  },
</span></span></code></pre></div><h3 id="拆分-css"><a href="#拆分-css" class="header-anchor">#</a> 拆分 CSS</h3> <p>打包用于生产环境使用时，使用 <a href="https://webpack.js.org/plugins/extract-text-webpack-plugin" target="_blank" rel="noopener noreferrer">ExtractTextWebpackPlugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 将您的 CSS 与 JavaScript 分开被认为是最佳实践。</p> <p>目前的 <code>.scss</code> 加载器非常适合开发环境，所以我们将把它们从 <code>webpack.common.js</code> 移到 <code>webpack.dev.js</code> 中，并只将 <code>ExtractTextWebpackPlugin</code> 添加到 <code>webpack.prod.js</code> 中。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev extract-text-webpack-plugin@4.0.0-beta.0
</code></pre></div><p><strong>webpack.common.js</strong></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ...
</span><span class="token prefix unchanged"> </span><span class="token line"> module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">   ...
</span><span class="token prefix unchanged"> </span><span class="token line">   module: {
</span><span class="token prefix unchanged"> </span><span class="token line">     rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">       ...
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">       {
</span><span class="token prefix deleted">-</span><span class="token line">         test: /\.scss$/,
</span><span class="token prefix deleted">-</span><span class="token line">         use: [
</span><span class="token prefix deleted">-</span><span class="token line">           {
</span><span class="token prefix deleted">-</span><span class="token line">             loader: 'style-loader'
</span><span class="token prefix deleted">-</span><span class="token line">           }, {
</span><span class="token prefix deleted">-</span><span class="token line">             loader: 'css-loader'
</span><span class="token prefix deleted">-</span><span class="token line">           }, {
</span><span class="token prefix deleted">-</span><span class="token line">             loader: 'sass-loader'
</span><span class="token prefix deleted">-</span><span class="token line">           }
</span><span class="token prefix deleted">-</span><span class="token line">         ]
</span><span class="token prefix deleted">-</span><span class="token line">       },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       ...
</span><span class="token prefix unchanged"> </span><span class="token line">     ]
</span><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span></code></pre></div><p><strong>webpack.dev.js</strong></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const merge = require('webpack-merge')
</span><span class="token prefix unchanged"> </span><span class="token line"> const common = require('./webpack.common.js')
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = merge(common, {
</span><span class="token prefix unchanged"> </span><span class="token line">   mode: 'development',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   module: {
</span><span class="token prefix inserted">+</span><span class="token line">     rules: [
</span><span class="token prefix inserted">+</span><span class="token line">       {
</span><span class="token prefix inserted">+</span><span class="token line">         test: /\.scss$/,
</span><span class="token prefix inserted">+</span><span class="token line">         use: [
</span><span class="token prefix inserted">+</span><span class="token line">           {
</span><span class="token prefix inserted">+</span><span class="token line">             loader: 'style-loader'
</span><span class="token prefix inserted">+</span><span class="token line">           }, {
</span><span class="token prefix inserted">+</span><span class="token line">             loader: 'css-loader'
</span><span class="token prefix inserted">+</span><span class="token line">           }, {
</span><span class="token prefix inserted">+</span><span class="token line">             loader: 'sass-loader'
</span><span class="token prefix inserted">+</span><span class="token line">           }
</span><span class="token prefix inserted">+</span><span class="token line">         ]
</span><span class="token prefix inserted">+</span><span class="token line">       }
</span><span class="token prefix inserted">+</span><span class="token line">     ]
</span><span class="token prefix inserted">+</span><span class="token line">   }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> })
</span></span></code></pre></div><p><strong>webpack.prod.js</strong></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const merge = require('webpack-merge')
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> const ExtractTextPlugin = require('extract-text-webpack-plugin')
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const common = require('./webpack.common.js')
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = merge(common, {
</span><span class="token prefix unchanged"> </span><span class="token line">   mode: 'production',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   module: {
</span><span class="token prefix inserted">+</span><span class="token line">     rules: [
</span><span class="token prefix inserted">+</span><span class="token line">       {
</span><span class="token prefix inserted">+</span><span class="token line">         test: /\.scss$/,
</span><span class="token prefix inserted">+</span><span class="token line">         use: ExtractTextPlugin.extract({
</span><span class="token prefix inserted">+</span><span class="token line">           fallback: 'style-loader',
</span><span class="token prefix inserted">+</span><span class="token line">           use: ['css-loader', 'sass-loader']
</span><span class="token prefix inserted">+</span><span class="token line">         })
</span><span class="token prefix inserted">+</span><span class="token line">       }
</span><span class="token prefix inserted">+</span><span class="token line">     ]
</span><span class="token prefix inserted">+</span><span class="token line">   },
</span><span class="token prefix inserted">+</span><span class="token line">   plugins: [
</span><span class="token prefix inserted">+</span><span class="token line">     new ExtractTextPlugin('style.css')
</span><span class="token prefix inserted">+</span><span class="token line">   ]
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> })
</span></span></code></pre></div><p>让我们比较两个构建脚本的输出：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">npm</span> run develop

Asset           Size      Chunks           Chunk Names
app.bundle.js   <span class="token number">28.5</span> KiB  app   <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  app
chat.bundle.js  <span class="token number">1.4</span> KiB   chat  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  chat
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">npm</span> run build

Asset           Size       Chunks        Chunk Names
chat.bundle.js  <span class="token number">375</span> bytes  <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  chat
app.bundle.js   <span class="token number">1.82</span> KiB   <span class="token number">1</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  app
style.css       <span class="token number">424</span> bytes  <span class="token number">1</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  app
</code></pre></div><p>既然我们的 CSS 是从我们的 JavaScript 包中提取出来用于生产的，我们需要从我们的 HTML 通过 <code>&lt;link&gt;</code> 标签引用它。</p> <p><strong>dist/index.html</strong></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;!DOCTYPE html&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;html&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;head&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;meta charset=&quot;UTF-8&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;title&gt;Code Splitting&lt;/title&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     &lt;link href=&quot;style.css&quot; rel=&quot;stylesheet&quot;&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;/head&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;body&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;script type=&quot;text/javascript&quot; src=&quot;app.bundle.js&quot;&gt;&lt;/script&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/body&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;/html&gt;
</span></span></code></pre></div><p>这允许在浏览器中并行下载 CSS 和 JavaScript，因此加载速度比单个包快。它还允许在 JavaScript 完成下载之前显示样式。</p> <h3 id="生成-html"><a href="#生成-html" class="header-anchor">#</a> 生成 HTML</h3> <p>每当我们的输出改变时，我们必须不断更新 <code>index.html</code> 来引用新的文件路径。这正是 <code>html-webpack-plugin</code> 能为我们自动完成的。</p> <p>我们不妨同时添加 <code>clean-webpack-plugin</code> ，以便在每次构建之前清除我们的 <code>/dist</code> 目录。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev html-webpack-plugin clean-webpack-plugin
</code></pre></div><p><strong>webpack.common.js</strong></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const path = require('path')
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> const CleanWebpackPlugin = require('clean-webpack-plugin');
</span><span class="token prefix inserted">+</span><span class="token line"> const HtmlWebpackPlugin = require('html-webpack-plugin');
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">   ...
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   plugins: [
</span><span class="token prefix inserted">+</span><span class="token line">     new CleanWebpackPlugin(['dist']),
</span><span class="token prefix inserted">+</span><span class="token line">     new HtmlWebpackPlugin({
</span><span class="token prefix inserted">+</span><span class="token line">       title: 'My killer app'
</span><span class="token prefix inserted">+</span><span class="token line">     })
</span><span class="token prefix inserted">+</span><span class="token line">   ]
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span></code></pre></div><p>现在每次我们构建的时候，dist 目录都会被清空。我们现在也将看到输出的 index.html，以及到我们的入口包的正确路径。</p> <p>运行 <code>npm run develop</code> 会产生以下结果:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>My killer app<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app.bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>而 <code>npm run build</code> 会产生这个：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>My killer app<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>style.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app.bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="development"><a href="#development" class="header-anchor">#</a> Development</h2> <p>webpack-dev-server 为您提供了一个简单的 web 服务器，并为您提供了实时重载，因此您不需要手动刷新页面来查看更改。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack-dev-server
</code></pre></div><p><strong>package.json</strong></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> {
</span><span class="token prefix unchanged"> </span><span class="token line">   ...
</span><span class="token prefix unchanged"> </span><span class="token line">   &quot;scripts&quot;: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     &quot;develop&quot;: &quot;webpack --watch --config webpack.dev.js&quot;,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     &quot;develop&quot;: &quot;webpack-dev-server --config webpack.dev.js&quot;,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line">   ...
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span><span class="token inserted-arrow inserted"><span class="token prefix inserted">&gt;</span><span class="token line"> npm run develop
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">｢wds｣: Project is running at http://localhost:8080/
</span><span class="token prefix unchanged"> </span><span class="token line">｢wds｣: webpack output is served from /
</span></span></code></pre></div><p>在浏览器中打开 http://localhost:8080/ 并对其中一个 JavaScript 或 CSS 文件进行更改。您应该会看到它自动构建和刷新。</p> <h3 id="hotmodulereplacement"><a href="#hotmodulereplacement" class="header-anchor">#</a> HotModuleReplacement</h3> <p><code>HotModuleReplacement</code> 插件比实时重载更进一步，在运行时无需刷新即可交换模块。如果配置正确，这将在开发单页应用程序的过程中节省大量时间。在页面中有很多状态的地方，可以对组件进行增量更改，只有更改后的模块才会被替换和更新。</p> <p><strong>webpack.dev.js</strong></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> const webpack = require('webpack')
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const merge = require('webpack-merge')
</span><span class="token prefix unchanged"> </span><span class="token line"> const common = require('./webpack.common.js')
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = merge(common, {
</span><span class="token prefix unchanged"> </span><span class="token line">   mode: 'development',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   devServer: {
</span><span class="token prefix inserted">+</span><span class="token line">     hot: true
</span><span class="token prefix inserted">+</span><span class="token line">   },
</span><span class="token prefix inserted">+</span><span class="token line">   plugins: [
</span><span class="token prefix inserted">+</span><span class="token line">     new webpack.HotModuleReplacementPlugin()
</span><span class="token prefix inserted">+</span><span class="token line">   ],
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   ...
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span></code></pre></div><p>现在，我们需要*接受(accept)*代码中已更改的模块来重新初始化。</p> <p><strong>src/app.js</strong></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> if (module.hot) {
</span><span class="token prefix inserted">+</span><span class="token line">   module.hot.accept()
</span><span class="token prefix inserted">+</span><span class="token line"> }
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ...
</span></span></code></pre></div><p>*注意：*启用热模块更换时，development 模式时 <code>module.hot</code> 设置为 <code>true</code>，production 时设置为 <code>false</code>，因此这些模块将从包中剥离。</p> <p>重新启动构建，看看当我们执行以下操作时会发生什么：</p> <ul><li>单击打开 chat</li> <li>添加一个新 person 到 <code>people.js</code> 模块中</li> <li>再次单击打开 chat</li></ul> <p><img src="https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/03/1521906879hmr.png" alt="Here's what's happening:"></p> <p>事情是这样的：</p> <ol><li>当 <em>Open chat</em> is 被点击时，<code>chat.js</code> 模块被获取并初始化</li> <li>HMR 检测到 <code>people.js</code> 何时被修改</li> <li><code>index.js</code> 中的 <code>module.hot.accept()</code> 导致由该条目块加载的所有模块被替换</li> <li>当 <em>Open chat</em> 被再次点击时， <code>chat.init()</code> 使用来自更新模块的代码运行。</li></ol> <h3 id="css-替换"><a href="#css-替换" class="header-anchor">#</a> CSS 替换</h3> <p>让我们将按钮颜色改为红色，看看会发生什么：</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> button {
</span><span class="token prefix unchanged"> </span><span class="token line">   ...
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   background: #24b47e;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   background: red;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   ...
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span></code></pre></div><p><img src="https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/03/1521906881hmr2.png" alt="img"></p> <p>现在我们可以看到我们样式的即时更新，而不会失去任何状态。这是一个大大改进的开发人员体验！感觉就像是未来。</p> <h2 id="http-2"><a href="#http-2" class="header-anchor">#</a> HTTP/2</h2> <p>使用像 Webpack 这样的模块管理器的一个主要好处是，它可以让您控制资产是如何构建的，然后在客户端获取的，从而帮助您提高性能。多年来，串联文件以减少需要在客户机上发出的请求数量被认为是<a href="https://developer.yahoo.com/performance/rules.html" target="_blank" rel="noopener noreferrer">最佳做法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。这仍然有效，但是现在 [HTTP/2 允许在一个请求中传递多个文件](HTTP/2 允许在一个请求中传递多个文件)，所以串联不再是一个万能药(silver bullet)。你的应用程序实际上可能会受益于单独缓存许多小文件。然后，客户端可以获取单个已更改的模块，而不必再次获取大部分内容相同的整个包。</p> <p>Webpack 的创建者 <a href="https://twitter.com/wSokra" target="_blank" rel="noopener noreferrer">Tobias Koppers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 写了一篇内容丰富的文章，解释为什么聚合仍然很重要，即使是在 HTTP/2 时代。</p> <h2 id="over-to-you"><a href="#over-to-you" class="header-anchor">#</a> Over to You</h2> <p>我希望你已经认可这个 Webpack 的介绍很有帮助，并且能够开始使用它达到很好的效果。围绕 Webpack 的配置、加载器和插件可能需要一点时间，但是学习这个工具是如何工作的将会有回报。</p> <p>Webpack 4 的文档目前正在编写中，但是已经整理好了。我强烈建议阅读<a href="https://webpack.js.org/concepts/" target="_blank" rel="noopener noreferrer">概念<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和<a href="https://webpack.js.org/guides/" target="_blank" rel="noopener noreferrer">指南<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>以获取更多信息。这里还有几个你可能感兴趣的话题：</p> <ul><li><a href="https://webpack.js.org/guides/development/#using-source-maps" target="_blank" rel="noopener noreferrer">Source Maps for development<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://webpack.js.org/guides/production/#source-mapping" target="_blank" rel="noopener noreferrer">Source Maps for production<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://webpack.js.org/guides/caching/" target="_blank" rel="noopener noreferrer">Cache busting with hashed filenames<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://webpack.js.org/plugins/commons-chunk-plugin/#explicit-vendor-chunk" target="_blank" rel="noopener noreferrer">Splitting a vendor bundle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>Webpack 4 是您选择的模块管理器吗？请在下面的评论中告诉我。</p> <p>*1：npm 安装模块的命令中 <code>--save-dev</code> 可以缩写为 <code>-D</code></p> <p>*2：因为程序版本的原因，我自己在按照以上操作后得到的包大小和上文中有些许出入，数量级没有差距，production 模式打出的包大小要比 development 模式的小得多。</p> <p>*3：按照这样配置 <code>.babelrc</code> 后运行打包命令会报 <code>&quot;syntax-dynamic-import&quot;</code> 模块未找到的相关错误，<code>npm install syntax-dynamic-import</code> 后能解决。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e1fa9833.js" defer></script><script src="/assets/js/2.368db4b0.js" defer></script><script src="/assets/js/26.e2e11f12.js" defer></script>
  </body>
</html>
